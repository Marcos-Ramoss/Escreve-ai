<div class="container mx-auto px-4 py-8 max-w-5xl">
    <p-progressSpinner *ngIf="loading" styleClass="w-12 h-12"></p-progressSpinner>

    <p-card *ngIf="!loading && preview" header="Preview do Documento">
        <div class="preview-container border p-6 bg-white" [innerHTML]="htmlSanitizado"></div>

        <ng-template pTemplate="footer">
            <div class="flex gap-2 justify-between">
                <p-button 
                    label="Voltar" 
                    icon="pi pi-arrow-left"
                    styleClass="p-button-secondary"
                    (click)="voltar()">
                </p-button>
                <div class="flex gap-2">
                    <p-button 
                        *ngIf="!preview.pago"
                        label="Pagar e Baixar PDF" 
                        icon="pi pi-credit-card"
                        styleClass="p-button-success"
                        [loading]="processandoPagamento"
                        (click)="iniciarPagamento()">
                    </p-button>
                    <p-button 
                        *ngIf="preview.pago"
                        label="Baixar PDF" 
                        icon="pi pi-download"
                        styleClass="p-button-primary"
                        [loading]="baixando"
                        (click)="baixarPdf()">
                    </p-button>
                </div>
            </div>
        </ng-template>
    </p-card>
</div>
